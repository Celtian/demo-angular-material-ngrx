import{a as ct,b as dt,c as ut}from"./chunk-GS2VCICI.js";import{a as Y,b as Z,e as $,f as tt,g as b,i as et,j as it,l as M,n as ot,o as rt,p as nt,q as at,s as lt,w as mt,x as pt}from"./chunk-UPRIFOMJ.js";import{b as ft,c as Ct,d as ht}from"./chunk-YZFBZFUB.js";import{D as W,E as J,F as K,G as X,c as h,ca as st,e as N,m as R,o as z,p as L,x as G,y as Q}from"./chunk-SJOHDBLO.js";import{a as bt,b as vt,c as _t,e as gt,f as xt}from"./chunk-3O7WHS4G.js";import{Ab as _,Dd as A,Ed as q,Gd as j,Hb as g,Hd as H,Id as U,Jb as x,Lb as P,Ra as t,S as I,Tb as D,Ub as E,Yb as m,Zb as u,_b as B,ab as V,dc as k,fc as e,gb as O,gc as i,oa as s,rb as v,rc as F,sb as w,tb as S,ua as f,va as C,xb as c,yb as n,zb as a}from"./chunk-AZWQBZSU.js";var Mt=o=>[o];function St(o,p){if(o&1){let y=g();n(0,"button",11),e(1,"translate"),e(2,"translate"),x("click",function(){f(y);let r=P();return C(r.form.controls.title.setValue(""))}),n(3,"mat-icon"),m(4,"close"),a()()}o&2&&(c("matTooltip",i(1,2,"uni.clear")),v("aria-label",i(2,4,"uni.clear")))}function Pt(o,p){if(o&1){let y=g();n(0,"button",11),e(1,"translate"),e(2,"translate"),x("click",function(){f(y);let r=P();return C(r.form.controls.body.setValue(""))}),n(3,"mat-icon"),m(4,"close"),a()()}o&2&&(c("matTooltip",i(1,2,"uni.clear")),v("aria-label",i(2,4,"uni.clear")))}function Bt(o,p){o&1&&(n(0,"div",12)(1,"a",13),e(2,"localize"),m(3),e(4,"translate"),a(),_(5,"mat-icon",14),e(6,"translate"),n(7,"a",13),e(8,"localize"),m(9),e(10,"translate"),a()()),o&2&&(t(),c("routerLink",k(15,Mt,i(2,5,"/"))),t(2),u(i(4,7,"breadcrumbs.app.posts")),t(2),v("aria-label",i(6,9,"uni.aria-label.arrow-icon")),t(2),c("routerLink",k(17,Mt,i(8,11,"/create"))),t(2),u(i(10,13,"breadcrumbs.posts.create")))}var re=(()=>{let p=class p{constructor(){this.postCollection=s(ft),this.breadcrumbsPortalService=s(X),this.fb=s(at),this.snackBar=s(st),this.router=s(G),this.lr=s(W),this.translate=s(j),this.confirm=s(ht),this.portalContent=F.required(h),this.form=this.fb.group({title:new M("",{nonNullable:!0,validators:[b.required,b.min(3)]}),body:new M("",{nonNullable:!0,validators:[b.required,b.min(3)]}),userId:new M(1,{nonNullable:!0})})}canDeactivate(){return this.form.pristine||this.confirm.openCustomConfirmDialog(Ct.UnsavedWork)}ngOnInit(){this.breadcrumbsPortalService.setPortal(this.portalContent())}ngOnDestroy(){this.portalContent()?.detach()}onSubmit(){this.postCollection.add(this.form.value).pipe(I()).subscribe({next:d=>{this.form.reset(d),this.snackBar.open(this.translate.instant("response.create.success"),this.translate.instant("uni.close"));let r=this.lr.translateRoute("/");this.router.navigate([r])},error:()=>{this.snackBar.open(this.translate.instant("response.create.failed"),this.translate.instant("uni.close"))}})}onReset(d){d.preventDefault(),this.form.reset()}};p.\u0275fac=function(r){return new(r||p)},p.\u0275cmp=V({type:p,selectors:[["app-post-create"]],viewQuery:function(r,l){r&1&&D(l.portalContent,h,5),r&2&&E()},decls:28,vars:21,consts:[["autosize","cdkTextareaAutosize"],[1,"flex","flex-col","gap-2","mt-2","text-center"],[3,"ngSubmit","reset","formGroup"],[1,"w-full"],["matInput","","type","text","formControlName","title"],["matSuffix","","mat-icon-button","",3,"matTooltip"],["matInput","","cdkTextareaAutosize","","formControlName","body",3,"placeholder"],[1,"flex","justify-center","gap-2"],["mat-button","","color","primary","type","reset",3,"disabled"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["class","container flex items-center gap-1 py-4",4,"cdkPortal"],["matSuffix","","mat-icon-button","",3,"click","matTooltip"],[1,"container","flex","items-center","gap-1","py-4"],["mat-button","","color","primary",3,"routerLink"],["aria-hidden","false","fontIcon","chevron_right"]],template:function(r,l){if(r&1){let T=g();n(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),m(3),a()(),n(4,"mat-card-content",1)(5,"form",2),x("ngSubmit",function(){return f(T),C(l.onSubmit())})("reset",function(wt){return f(T),C(l.onReset(wt))}),n(6,"mat-form-field",3)(7,"mat-label"),m(8),e(9,"translate"),a(),_(10,"input",4),w(11,St,5,6,"button",5),a(),n(12,"mat-form-field",3)(13,"mat-label"),m(14),e(15,"translate"),a(),_(16,"textarea",6,0),e(18,"translate"),w(19,Pt,5,6,"button",5),a(),n(20,"div",7)(21,"button",8),m(22),e(23,"translate"),a(),n(24,"button",9),m(25),e(26,"translate"),a()()()()(),O(27,Bt,11,19,"div",10)}r&2&&(t(3),u(l.form.controls.title.value),t(2),c("formGroup",l.form),t(3),u(i(9,11,"form.post.title.label")),t(3),S(l.form.controls.title.value?11:-1),t(3),u(i(15,13,"form.post.body.label")),t(2),c("placeholder",i(18,15,"form.post.body.placeholder")),t(3),S(l.form.controls.body.value?19:-1),t(2),c("disabled",l.form.pristine),t(),B(" ",i(23,17,"uni.reset")," "),t(2),c("disabled",l.form.pristine||l.form.invalid),t(),B(" ",i(26,19,"uni.submit")," "))},dependencies:[lt,ot,tt,et,it,rt,nt,xt,bt,_t,gt,vt,q,A,ut,dt,$,Y,Z,ct,L,z,R,pt,mt,N,h,U,Q,K,H,J],styles:["[_nghost-%COMP%]{width:100%;margin-right:auto;margin-left:auto;padding-right:1rem;padding-left:1rem}@media (min-width: 640px){[_nghost-%COMP%]{max-width:640px}}@media (min-width: 768px){[_nghost-%COMP%]{max-width:768px}}@media (min-width: 1024px){[_nghost-%COMP%]{max-width:1024px}}@media (min-width: 1280px){[_nghost-%COMP%]{max-width:1280px}}@media (min-width: 1536px){[_nghost-%COMP%]{max-width:1536px}}[_nghost-%COMP%]{display:block}[_nghost-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}[_nghost-%COMP%]{padding-top:1rem;padding-bottom:1rem}"],changeDetection:0});let o=p;return o})();export{re as PostCreateComponent};
