import{a as at}from"./chunk-ZOJBUXSF.js";import{b,c as mt,d as ut}from"./chunk-HOBOZURF.js";import{b as et,c as it,e as nt}from"./chunk-BKELB6RQ.js";import{d as tt}from"./chunk-M6VZOVU3.js";import{b as ot}from"./chunk-NNW4BEXG.js";import{G as A,H as Q,Ha as $,P as q,Q as H,V as K,W,X as Y,Y as Z,c as S,e as U,f as z}from"./chunk-EEQWKZPP.js";import{a as rt,b as dt,c as lt,d as pt,e as ct,f as st}from"./chunk-MWHJC5X3.js";import{$b as h,Cb as C,Db as a,Eb as o,Fb as _,Mb as T,Ob as O,Pc as N,Qb as u,Wa as e,Yb as B,Zb as R,Zc as F,aa as D,bc as d,cc as s,dc as v,gb as w,hd as V,ic as P,id as j,jc as L,kc as n,kd as X,lc as r,ld as G,mb as E,md as J,na as c,ta as I,ua as M,uc as k,wb as g,xb as f,yb as x,za as y}from"./chunk-BFBS7VVL.js";var ft=i=>[i],xt=(i,m)=>[i,m];function Ct(i,m){if(i&1){let t=T();a(0,"div",1)(1,"button",4),O("deleted",function(){I(t);let p=u(2);return M(p.onDeleted())}),d(2),n(3,"translate"),o(),a(4,"a",5),n(5,"localize"),d(6),n(7,"translate"),o()()}if(i&2){let t=u(2);e(),C("appPostDelete",t.dataSource.data().id),e(),v(" ",r(3,4,"uni.delete")," "),e(2),C("routerLink",P(10,ft,r(5,6,"/"+t.dataSource.data().id+"/"+t.ROUTE_DEFINITION.POSTS.EDIT))),e(2),s(r(7,8,"uni.edit"))}}function ht(i,m){if(i&1&&(f(0,Ct,8,12,"div",1),a(1,"mat-card")(2,"mat-card-header")(3,"mat-card-subtitle"),d(4),o(),a(5,"mat-card-title"),d(6),n(7,"uppercase"),o()(),a(8,"mat-card-content")(9,"p",2),d(10),n(11,"translate"),o(),a(12,"p"),d(13),o(),a(14,"p",2),d(15),n(16,"translate"),o(),_(17,"app-user-info",3),o()()),i&2){let t=u();x(t.dataSource.state()==="data"?0:-1),e(3),h("blur-sm",t.dataSource.state()==="loading"),e(),s("#"+t.dataSource.data().id),e(),h("blur-sm",t.dataSource.state()==="loading"),e(),s(r(7,18,t.dataSource.data().title)),e(3),h("blur-sm",t.dataSource.state()==="loading"),e(),v(" ",r(11,20,"post-detail.about-post")," "),e(2),h("blur-sm",t.dataSource.state()==="loading"),e(),v(" ",t.dataSource.data().body," "),e(),h("blur-sm",t.dataSource.state()==="loading"),e(),v(" ",r(16,22,"post-detail.about-author")," "),e(2),C("user",t.dataSource.data().user)("isLoading",t.dataSource.state()==="loading")}}function _t(i,m){if(i&1&&(a(0,"mat-card")(1,"mat-card-content",6),_(2,"mat-icon",7),n(3,"translate"),a(4,"div"),d(5),o()()()),i&2){let t=u();e(2),g("aria-label",r(3,2,"uni.aria-label.error-icon")),e(3),s(t.dataSource.error())}}function vt(i,m){i&1&&(a(0,"mat-card")(1,"mat-card-content",6),_(2,"mat-icon",8),n(3,"translate"),a(4,"div"),d(5),n(6,"translate"),o()()()),i&2&&(e(2),g("aria-label",r(3,2,"uni.aria-label.warning-icon")),e(3),s(r(6,4,"error.post-was-not-found")))}function St(i,m){if(i&1&&(_(0,"mat-icon",10),n(1,"translate"),a(2,"a",5),n(3,"localize"),d(4),o()),i&2){let t=u(2);g("aria-label",r(1,3,"uni.aria-label.arrow-icon")),e(2),C("routerLink",L(7,xt,r(3,5,"/"),t.dataSource.data().id)),e(2),s(t.dataSource.data().id)}}function gt(i,m){if(i&1&&(a(0,"div",9)(1,"a",5),n(2,"localize"),d(3),n(4,"translate"),o(),f(5,St,5,10),o()),i&2){let t=u();e(),C("routerLink",P(7,ft,r(2,3,"/"))),e(2),s(r(4,5,"breadcrumbs.app.posts")),e(2),x(t.dataSource.state()==="data"?5:-1)}}var te=(()=>{class i{constructor(){this.postCollection=c(ot),this.translate=c(X),this.breadcrumbsPortalService=c(Z),this.lr=c(K),this.router=c(q),this.store=c($),this.portalContent=k.required(S),this.destroyRef=c(y),this.dataSource=new it(b),this.ROUTE_DEFINITION=tt}ngOnDestroy(){this.portalContent()?.detach()}ngOnInit(){this.breadcrumbsPortalService.setPortal(this.portalContent()),this.store.select(et).pipe(ut(this.dataSource),mt(),D(t=>this.postCollection.getExpanded(t)),z(this.destroyRef)).subscribe({next:t=>{this.dataSource.setData(t)},error:t=>{if(t instanceof F&&t.status>=400&&t.status<500)this.dataSource.setData(b);else{let l=this.translate.instant("error.unexpected-exception");this.dataSource.setError(l)}}})}onDeleted(){let t=this.lr.translateRoute("/");this.router.navigate([t])}static{this.\u0275fac=function(l){return new(l||i)}}static{this.\u0275cmp=w({type:i,selectors:[["app-post-detail"]],viewQuery:function(l,p){l&1&&B(p.portalContent,S,5),l&2&&R()},decls:4,vars:3,consts:[["class","container flex items-center gap-1 py-4",4,"cdkPortal"],[1,"flex","items-end","justify-end","gap-2"],[1,"mb-2","font-semibold","text-md"],[3,"user","isLoading"],["mat-button","","color","accent",3,"deleted","appPostDelete"],["mat-button","","color","primary",3,"routerLink"],[1,"flex","flex-col","gap-2","text-center"],["aria-hidden","false","fontIcon","error"],["aria-hidden","false","fontIcon","warning"],[1,"container","flex","items-center","gap-1","py-4"],["aria-hidden","false","fontIcon","chevron_right"]],template:function(l,p){l&1&&(f(0,ht,18,24),f(1,_t,6,4,"mat-card"),f(2,vt,7,6,"mat-card"),E(3,gt,6,9,"div",0)),l&2&&(x(p.dataSource.state()==="data"||p.dataSource.state()==="loading"?0:-1),e(),x(p.dataSource.state()==="error"?1:-1),e(),x(p.dataSource.state()==="empty"?2:-1))},dependencies:[st,rt,lt,ct,pt,dt,j,V,Q,A,U,S,J,at,H,Y,nt,N,G,W],styles:["[_nghost-%COMP%]{width:100%;margin-right:auto;margin-left:auto;padding-right:1rem;padding-left:1rem}@media(min-width:640px){[_nghost-%COMP%]{max-width:640px}}@media(min-width:768px){[_nghost-%COMP%]{max-width:768px}}@media(min-width:1024px){[_nghost-%COMP%]{max-width:1024px}}@media(min-width:1280px){[_nghost-%COMP%]{max-width:1280px}}@media(min-width:1536px){[_nghost-%COMP%]{max-width:1536px}}[_nghost-%COMP%]{display:block}[_nghost-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}[_nghost-%COMP%]{padding-top:1rem;padding-bottom:1rem}"],changeDetection:0})}}return i})();export{te as PostDetailComponent};
