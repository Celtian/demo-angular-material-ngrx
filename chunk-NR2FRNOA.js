import{a as ut,b as ft,c as Ct}from"./chunk-EGRM6FDS.js";import{a as $,b as tt,e as et,f as it,g as b,i as rt,j as ot,l as y,n as nt,o as at,p as lt,q as mt,s as st,w as pt,x as ct}from"./chunk-NABI6HYQ.js";import{b as ht,c as bt,d as vt}from"./chunk-D3JFTT3S.js";import{D as K,E as X,F as Y,G as Z,c as M,ca as dt,e as j,m as z,o as L,p as A,x as q,y as H}from"./chunk-QJEKRHCX.js";import{a as _t,b as xt,c as gt,e as Mt,f as yt}from"./chunk-EIMWVRG7.js";import{$a as c,Ad as Q,Cb as a,Cd as U,Db as l,Dd as W,Eb as _,Ed as J,Ib as x,Kb as g,Lb as k,Pb as R,Qb as F,Rb as N,T as O,Wb as s,Xa as t,Xb as f,Yb as T,ac as V,cc as i,dc as r,fb as D,lb as E,sb as v,tb as d,wa as C,xa as h,xb as I,yb as B,zd as G}from"./chunk-PLUG2Y6C.js";var wt=o=>[o];function It(o,p){if(o&1){let w=x();a(0,"button",11),i(1,"translate"),i(2,"translate"),g("click",function(){C(w);let e=k();return h(e.form.controls.title.setValue(""))}),a(3,"mat-icon"),s(4,"close"),l()()}o&2&&(d("matTooltip",r(1,2,"uni.clear")),v("aria-label",r(2,4,"uni.clear")))}function Bt(o,p){if(o&1){let w=x();a(0,"button",11),i(1,"translate"),i(2,"translate"),g("click",function(){C(w);let e=k();return h(e.form.controls.body.setValue(""))}),a(3,"mat-icon"),s(4,"close"),l()()}o&2&&(d("matTooltip",r(1,2,"uni.clear")),v("aria-label",r(2,4,"uni.clear")))}function kt(o,p){o&1&&(a(0,"div",12)(1,"a",13),i(2,"localize"),s(3),i(4,"translate"),l(),_(5,"mat-icon",14),i(6,"translate"),a(7,"a",13),i(8,"localize"),s(9),i(10,"translate"),l()()),o&2&&(t(),d("routerLink",V(15,wt,r(2,5,"/"))),t(2),f(r(4,7,"breadcrumbs.app.posts")),t(2),v("aria-label",r(6,9,"uni.aria-label.arrow-icon")),t(2),d("routerLink",V(17,wt,r(8,11,"/create"))),t(2),f(r(10,13,"breadcrumbs.posts.create")))}var ne=(()=>{let p=class p{constructor(m,e,n,u,S,P,St,Pt){this.postCollection=m,this.breadcrumbsPortalService=e,this.fb=n,this.snackBar=u,this.router=S,this.lr=P,this.translate=St,this.confirm=Pt,this.form=this.fb.group({title:new y("",{nonNullable:!0,validators:[b.required,b.min(3)]}),body:new y("",{nonNullable:!0,validators:[b.required,b.min(3)]}),userId:new y(1,{nonNullable:!0})})}canDeactivate(){return this.form.pristine||this.confirm.openCustomConfirmDialog(ht.UnsavedWork)}ngOnInit(){this.breadcrumbsPortalService.setPortal(this.portalContent)}ngOnDestroy(){this.portalContent?.detach()}onSubmit(){this.postCollection.add(this.form.value).pipe(O()).subscribe({next:m=>{this.form.reset(m),this.snackBar.open(this.translate.instant("response.create.success"),this.translate.instant("uni.close"));let e=this.lr.translateRoute("/");this.router.navigate([e])},error:()=>{this.snackBar.open(this.translate.instant("response.create.failed"),this.translate.instant("uni.close"))}})}onReset(m){m.preventDefault(),this.form.reset()}};p.\u0275fac=function(e){return new(e||p)(c(vt),c(Z),c(mt),c(dt),c(q),c(K),c(U),c(bt))},p.\u0275cmp=D({type:p,selectors:[["app-post-create"]],viewQuery:function(e,n){if(e&1&&R(M,7),e&2){let u;F(u=N())&&(n.portalContent=u.first)}},decls:28,vars:21,consts:[["autosize","cdkTextareaAutosize"],[1,"flex","flex-col","gap-2","mt-2","text-center"],[3,"ngSubmit","reset","formGroup"],[1,"w-full"],["matInput","","type","text","formControlName","title"],["matSuffix","","mat-icon-button","",3,"matTooltip"],["matInput","","cdkTextareaAutosize","","formControlName","body",3,"placeholder"],[1,"flex","justify-center","gap-2"],["mat-button","","color","primary","type","reset",3,"disabled"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["class","container flex items-center gap-1 py-4",4,"cdkPortal"],["matSuffix","","mat-icon-button","",3,"click","matTooltip"],[1,"container","flex","items-center","gap-1","py-4"],["mat-button","","color","primary",3,"routerLink"],["aria-hidden","false","fontIcon","chevron_right"]],template:function(e,n){if(e&1){let u=x();a(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),s(3),l()(),a(4,"mat-card-content",1)(5,"form",2),g("ngSubmit",function(){return C(u),h(n.onSubmit())})("reset",function(P){return C(u),h(n.onReset(P))}),a(6,"mat-form-field",3)(7,"mat-label"),s(8),i(9,"translate"),l(),_(10,"input",4),I(11,It,5,6,"button",5),l(),a(12,"mat-form-field",3)(13,"mat-label"),s(14),i(15,"translate"),l(),_(16,"textarea",6,0),i(18,"translate"),I(19,Bt,5,6,"button",5),l(),a(20,"div",7)(21,"button",8),s(22),i(23,"translate"),l(),a(24,"button",9),s(25),i(26,"translate"),l()()()()(),E(27,kt,11,19,"div",10)}e&2&&(t(3),f(n.form.controls.title.value),t(2),d("formGroup",n.form),t(3),f(r(9,11,"form.post.title.label")),t(3),B(n.form.controls.title.value?11:-1),t(3),f(r(15,13,"form.post.body.label")),t(2),d("placeholder",r(18,15,"form.post.body.placeholder")),t(3),B(n.form.controls.body.value?19:-1),t(2),d("disabled",n.form.pristine),t(),T(" ",r(23,17,"uni.reset")," "),t(2),d("disabled",n.form.pristine||n.form.invalid),t(),T(" ",r(26,19,"uni.submit")," "))},dependencies:[st,nt,it,rt,ot,at,lt,yt,_t,gt,Mt,xt,Q,G,Ct,ft,et,$,tt,ut,A,L,z,ct,pt,j,M,J,W,H,Y,X],styles:["[_nghost-%COMP%]{width:100%;margin-right:auto;margin-left:auto;padding-right:1rem;padding-left:1rem}@media (min-width: 640px){[_nghost-%COMP%]{max-width:640px}}@media (min-width: 768px){[_nghost-%COMP%]{max-width:768px}}@media (min-width: 1024px){[_nghost-%COMP%]{max-width:1024px}}@media (min-width: 1280px){[_nghost-%COMP%]{max-width:1280px}}@media (min-width: 1536px){[_nghost-%COMP%]{max-width:1536px}}[_nghost-%COMP%]{display:block}[_nghost-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}[_nghost-%COMP%]{padding-top:1rem;padding-bottom:1rem}"],changeDetection:0});let o=p;return o})();export{ne as PostCreateComponent};
