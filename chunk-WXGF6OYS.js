import{a as st,b as ct,c as dt}from"./chunk-MGV7NFSY.js";import{a as X,b as Y,e as Z,f as $,g as h,i as tt,j as et,l as x,n as it,o as ot,p as rt,q as nt,s as at,w as lt,x as mt}from"./chunk-WWXLHB2V.js";import{b as ut,c as ft,d as Ct}from"./chunk-M73QHJTY.js";import{E as N,G as R,H as z,P as q,Q as G,V as U,W,X as J,Y as K,c as C,e as F,ua as pt}from"./chunk-5J5MYJ4A.js";import{a as ht,b as bt,c as vt,e as _t,f as gt}from"./chunk-NWBZT3D6.js";import{Cb as c,Db as n,Eb as a,Fb as v,Mb as _,Ob as g,Qb as w,R as T,Wa as t,Yb as O,Zb as D,bc as p,cc as d,dc as P,gb as I,hd as L,ic as S,id as A,kc as o,kd as Q,lc as r,ld as j,mb as V,md as H,na as s,ta as u,ua as f,uc as E,wb as b,xb as M,yb as y}from"./chunk-NLKMFLTC.js";var xt=e=>[e];function wt(e,B){if(e&1){let m=_();n(0,"button",11),o(1,"translate"),o(2,"translate"),g("click",function(){u(m);let i=w();return f(i.form.controls.title.setValue(""))}),n(3,"mat-icon"),p(4,"close"),a()()}e&2&&(c("matTooltip",r(1,2,"uni.clear")),b("aria-label",r(2,4,"uni.clear")))}function Pt(e,B){if(e&1){let m=_();n(0,"button",11),o(1,"translate"),o(2,"translate"),g("click",function(){u(m);let i=w();return f(i.form.controls.body.setValue(""))}),n(3,"mat-icon"),p(4,"close"),a()()}e&2&&(c("matTooltip",r(1,2,"uni.clear")),b("aria-label",r(2,4,"uni.clear")))}function St(e,B){e&1&&(n(0,"div",12)(1,"a",13),o(2,"localize"),p(3),o(4,"translate"),a(),v(5,"mat-icon",14),o(6,"translate"),n(7,"a",13),o(8,"localize"),p(9),o(10,"translate"),a()()),e&2&&(t(),c("routerLink",S(15,xt,r(2,5,"/"))),t(2),d(r(4,7,"breadcrumbs.app.posts")),t(2),b("aria-label",r(6,9,"uni.aria-label.arrow-icon")),t(2),c("routerLink",S(17,xt,r(8,11,"/create"))),t(2),d(r(10,13,"breadcrumbs.posts.create")))}var oe=(()=>{class e{constructor(){this.postCollection=s(ut),this.breadcrumbsPortalService=s(K),this.fb=s(nt),this.snackBar=s(pt),this.router=s(q),this.lr=s(U),this.translate=s(Q),this.confirm=s(Ct),this.portalContent=E.required(C),this.form=this.fb.group({title:new x("",{nonNullable:!0,validators:[h.required,h.min(3)]}),body:new x("",{nonNullable:!0,validators:[h.required,h.min(3)]}),userId:new x(1,{nonNullable:!0})})}canDeactivate(){return this.form.pristine||this.confirm.openCustomConfirmDialog(ft.UnsavedWork)}ngOnInit(){this.breadcrumbsPortalService.setPortal(this.portalContent())}ngOnDestroy(){this.portalContent()?.detach()}onSubmit(){this.postCollection.add(this.form.value).pipe(T()).subscribe({next:m=>{this.form.reset(m),this.snackBar.open(this.translate.instant("response.create.success"),this.translate.instant("uni.close"));let l=this.lr.translateRoute("/");this.router.navigate([l])},error:()=>{this.snackBar.open(this.translate.instant("response.create.failed"),this.translate.instant("uni.close"))}})}onReset(m){m.preventDefault(),this.form.reset()}static{this.\u0275fac=function(l){return new(l||e)}}static{this.\u0275cmp=I({type:e,selectors:[["app-post-create"]],viewQuery:function(l,i){l&1&&O(i.portalContent,C,5),l&2&&D()},decls:28,vars:21,consts:[["autosize","cdkTextareaAutosize"],[1,"flex","flex-col","gap-2","mt-2","text-center"],[3,"ngSubmit","reset","formGroup"],[1,"w-full"],["matInput","","type","text","formControlName","title"],["matSuffix","","mat-icon-button","",3,"matTooltip"],["matInput","","cdkTextareaAutosize","","formControlName","body",3,"placeholder"],[1,"flex","justify-center","gap-2"],["mat-button","","color","primary","type","reset",3,"disabled"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["class","container flex items-center gap-1 py-4",4,"cdkPortal"],["matSuffix","","mat-icon-button","",3,"click","matTooltip"],[1,"container","flex","items-center","gap-1","py-4"],["mat-button","","color","primary",3,"routerLink"],["aria-hidden","false","fontIcon","chevron_right"]],template:function(l,i){if(l&1){let k=_();n(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),p(3),a()(),n(4,"mat-card-content",1)(5,"form",2),g("ngSubmit",function(){return u(k),f(i.onSubmit())})("reset",function(yt){return u(k),f(i.onReset(yt))}),n(6,"mat-form-field",3)(7,"mat-label"),p(8),o(9,"translate"),a(),v(10,"input",4),M(11,wt,5,6,"button",5),a(),n(12,"mat-form-field",3)(13,"mat-label"),p(14),o(15,"translate"),a(),v(16,"textarea",6,0),o(18,"translate"),M(19,Pt,5,6,"button",5),a(),n(20,"div",7)(21,"button",8),p(22),o(23,"translate"),a(),n(24,"button",9),p(25),o(26,"translate"),a()()()()(),V(27,St,11,19,"div",10)}l&2&&(t(3),d(i.form.controls.title.value),t(2),c("formGroup",i.form),t(3),d(r(9,11,"form.post.title.label")),t(3),y(i.form.controls.title.value?11:-1),t(3),d(r(15,13,"form.post.body.label")),t(2),c("placeholder",r(18,15,"form.post.body.placeholder")),t(3),y(i.form.controls.body.value?19:-1),t(2),c("disabled",i.form.pristine),t(),P(" ",r(23,17,"uni.reset")," "),t(2),c("disabled",i.form.pristine||i.form.invalid),t(),P(" ",r(26,19,"uni.submit")," "))},dependencies:[at,it,$,tt,et,rt,ot,gt,ht,vt,_t,bt,A,L,dt,ct,Z,X,Y,st,z,R,N,mt,lt,F,C,H,G,J,j,W],styles:["[_nghost-%COMP%]{width:100%;margin-right:auto;margin-left:auto;padding-right:1rem;padding-left:1rem}@media(min-width:640px){[_nghost-%COMP%]{max-width:640px}}@media(min-width:768px){[_nghost-%COMP%]{max-width:768px}}@media(min-width:1024px){[_nghost-%COMP%]{max-width:1024px}}@media(min-width:1280px){[_nghost-%COMP%]{max-width:1280px}}@media(min-width:1536px){[_nghost-%COMP%]{max-width:1536px}}[_nghost-%COMP%]{display:block}[_nghost-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}[_nghost-%COMP%]{padding-top:1rem;padding-bottom:1rem}"],changeDetection:0})}}return e})();export{oe as PostCreateComponent};
